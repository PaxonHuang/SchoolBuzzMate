{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"page-container\">\n    <!-- È°µÈù¢ËÉåÊôØË£ÖÈ•∞ -->\n    <view class=\"page-doodle-1\">‚ú¶</view>\n    <view class=\"page-doodle-2\">‚óâ</view>\n    <view class=\"page-doodle-3\">‚òÜ</view>\n\n    <!-- Ê¨¢ËøéÂç°Áâá -->\n    <brutalist-card class=\"welcome-card\" taped accent doodle>\n      <text class=\"welcome-title\">Ê†°Ë∂£Èó™Êê≠</text>\n      <text class=\"welcome-subtitle\">Ê†°Âõ≠ÁîüÊ¥ªÊúçÂä°Âπ≥Âè∞</text>\n      <view class=\"welcome-decoration\">\n        <text class=\"deco-line\"></text>\n        <text class=\"deco-star\">‚òÖ</text>\n        <text class=\"deco-line\"></text>\n      </view>\n    </brutalist-card>\n\n    <!-- ÁôªÂΩïÊèêÁ§∫Âç°Áâá -->\n    <brutalist-card v-if=\"!userStore.isLoggedIn\" class=\"login-card\" dashed>\n      <view class=\"login-content\">\n        <text class=\"login-icon\">üëã</text>\n        <text class=\"login-title\">Ê¨¢ËøéÊù•Âà∞Ê†°Ë∂£</text>\n        <text class=\"login-desc\">ÁôªÂΩïÂêéÂèØ‰ΩøÁî®ÂÖ®ÈÉ®ÂäüËÉΩ</text>\n\n        <view class=\"feature-tags\">\n          <view class=\"feature-tag\">\n            <text>üìù</text>\n            <text>ÂèëÂ∏ñ‰∫§ÊµÅ</text>\n          </view>\n          <view class=\"feature-tag\">\n            <text>üë•</text>\n            <text>ÂØªÊâæÊê≠Â≠ê</text>\n          </view>\n          <view class=\"feature-tag\">\n            <text>üì¶</text>\n            <text>Ë∑ëËÖøÊúçÂä°</text>\n          </view>\n        </view>\n\n        <brutalist-button\n          class=\"login-btn\"\n          accent\n          taped\n          arrow\n          large\n          @click=\"handleLogin\"\n        >\n          Á´ãÂç≥ÁôªÂΩï\n        </brutalist-button>\n      </view>\n    </brutalist-card>\n\n    <!-- Áî®Êà∑‰ø°ÊÅØÂç°Áâá -->\n    <brutalist-card v-else class=\"user-card\" taped>\n      <view class=\"user-header\">\n        <view class=\"user-avatar-wrapper\" @click=\"goToProfile\">\n          <text class=\"user-avatar\">{{ userStore.user?.nickname?.charAt(0) || 'U' }}</text>\n          <view class=\"edit-hint\">‚úèÔ∏è</view>\n        </view>\n        <view class=\"user-info-section\">\n          <text class=\"user-name\">{{ userStore.user?.nickname || 'Ê†°Âõ≠Áî®Êà∑' }}</text>\n          <view class=\"user-campus\">\n            <text class=\"campus-icon\">üìç</text>\n            <text>{{ userStore.user?.campus || 'Êú™ËÆæÁΩÆÊ†°Âå∫' }}</text>\n          </view>\n        </view>\n        <brutalist-button class=\"profile-btn\" accent taped @click=\"goToProfile\">\n          ÊàëÁöÑ\n        </brutalist-button>\n      </view>\n\n      <!-- Áî®Êà∑Ê†áÁ≠æ -->\n      <view v-if=\"userStore.user?.tags?.length > 0\" class=\"user-tags\">\n        <view\n          v-for=\"(tag, index) in userStore.user.tags\"\n          :key=\"index\"\n          class=\"user-tag\"\n        >\n          {{ tag }}\n        </view>\n      </view>\n\n      <!-- ÂäüËÉΩÂÖ•Âè£ -->\n      <view class=\"quick-actions\">\n        <view class=\"action-item\" @click=\"goToPage('buddy')\">\n          <text class=\"action-icon\">üë•</text>\n          <text class=\"action-name\">ÊâæÊê≠Â≠ê</text>\n          <text class=\"action-arrow\">‚Üí</text>\n        </view>\n        <view class=\"action-item\" @click=\"goToPage('delivery')\">\n          <text class=\"action-icon\">üì¶</text>\n          <text class=\"action-name\">Ë∑ëËÖø</text>\n          <text class=\"action-arrow\">‚Üí</text>\n        </view>\n        <view class=\"action-item\" @click=\"goToPage('forum')\">\n          <text class=\"action-icon\">üìù</text>\n          <text class=\"action-name\">ËÆ∫Âùõ</text>\n          <text class=\"action-arrow\">‚Üí</text>\n        </view>\n      </view>\n    </brutalist-card>\n\n    <!-- Ê∂àÊÅØÊùøÂùó -->\n    <brutalist-card class=\"message-section\" dashed>\n      <view class=\"message-header\">\n        <text class=\"message-title\">Ê∂àÊÅØÈÄöÁü•</text>\n        <view class=\"message-unread\" v-if=\"unreadCount > 0\">\n          <text class=\"unread-badge\">{{ unreadCount }}</text>\n        </view>\n      </view>\n      <view class=\"message-list\" v-if=\"messages.length > 0\">\n        <view\n          v-for=\"(message, index) in messages.slice(0, 3)\"\n          :key=\"message._id || index\"\n          class=\"message-item\"\n          @click=\"viewMessage(message)\"\n        >\n          <view class=\"message-icon\" :class=\"'message-icon-' + message.type\">\n            <text>{{ getMessageIcon(message.type) }}</text>\n          </view>\n          <view class=\"message-content\">\n            <text class=\"message-title-text\">{{ message.title || getMessageTitle(message.type) }}</text>\n            <text class=\"message-preview\">{{ message.content }}</text>\n          </view>\n          <text class=\"message-time\">{{ formatTime(message.timestamp || message.createTime) }}</text>\n        </view>\n      </view>\n      <view v-else class=\"no-messages\">\n        <text class=\"no-messages-icon\">üîî</text>\n        <text class=\"no-messages-text\">ÊöÇÊó†Êñ∞Ê∂àÊÅØ</text>\n      </view>\n      <brutalist-button v-if=\"messages.length > 0\" class=\"view-all-btn\" outline @click=\"goToMessages\">\n        Êü•ÁúãÂÖ®ÈÉ®Ê∂àÊÅØ\n      </brutalist-button>\n    </brutalist-card>\n\n    <!-- Â∫ïÈÉ®ÂØºËà™Ê†è -->\n    <TabBar />\n  </view>\n</template>\n\n<script setup lang=\"uts\">\nimport { ref, computed, onMounted } from 'vue'\nimport { onPullDownRefresh, onShow } from '@dcloudio/uni-app'\nimport { useUserStore } from '@/stores/user'\nimport BrutalistCard from '@/components/brutalist/BrutalistCard.vue'\nimport BrutalistButton from '@/components/brutalist/BrutalistButton.vue'\nimport TabBar from '@/components/brutalist/TabBar.vue'\n\nconst userStore = useUserStore()\n\n// Ê∂àÊÅØÁ±ªÂûãÂÆö‰πâ\ninterface Message {\n  _id: string\n  type: string\n  title: string\n  content: string\n  timestamp: number\n  read: boolean\n  status?: string\n  orderInfo?: any\n}\n\n// Ê∂àÊÅØÊï∞ÊçÆ\nconst messages = ref<Message[]>([])\nconst unreadCount = computed(() => {\n  return messages.value.filter(m => !m.read).length\n})\n\n// È°µÈù¢Âä†ËΩΩÊó∂Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ\nonMounted(() => {\n  userStore.checkLoginStatus()\n  if (userStore.isLoggedIn) {\n    loadMessages()\n  }\n})\n\n// È°µÈù¢ÊòæÁ§∫Êó∂Âà∑Êñ∞ÂàóË°®Ôºà‰ªéÂàõÂª∫È°µÈù¢ËøîÂõûÊó∂Ëß¶ÂèëÔºâ\nonShow(() => {\n  if (userStore.isLoggedIn) {\n    loadMessages()\n  }\n})\n\n// È°µÈù¢Ë∑≥ËΩ¨\nfunction goToPage(page: string) {\n  uni.switchTab({\n    url: `/pages/${page}/index`\n  })\n}\n\n// Ë∑≥ËΩ¨Âà∞‰∏™‰∫∫‰∏≠ÂøÉ\nfunction goToProfile() {\n  uni.navigateTo({\n    url: '/pages/user/index'\n  })\n}\n\n// Ë∑≥ËΩ¨Âà∞Ê∂àÊÅØ‰∏≠ÂøÉ\nfunction goToMessages() {\n  uni.switchTab({\n    url: '/pages/messages/index'\n  })\n}\n\n// Êü•ÁúãÊ∂àÊÅØ\nfunction viewMessage(message: Message) {\n  uni.navigateTo({\n    url: `/pages/messages/index?messageId=${message._id}`\n  })\n}\n\n// Ëé∑ÂèñÊ∂àÊÅØÂõæÊ†á\nfunction getMessageIcon(type: string): string {\n  const iconMap: Record<string, string> = {\n    'order': 'üì¶',\n    'comment': 'üí¨',\n    'like': '‚ù§Ô∏è',\n    'system': 'üîî',\n    'chat': 'üí¨'\n  }\n  return iconMap[type] || 'üîî'\n}\n\n// Ëé∑ÂèñÊ∂àÊÅØÊ†áÈ¢ò\nfunction getMessageTitle(type: string): string {\n  const titleMap: Record<string, string> = {\n    'order': 'ËÆ¢ÂçïÈÄöÁü•',\n    'comment': 'Êñ∞ËØÑËÆ∫',\n    'like': 'ÁÇπËµûÊèêÈÜí',\n    'system': 'Á≥ªÁªüÊ∂àÊÅØ',\n    'chat': 'ÁßÅ‰ø°Ê∂àÊÅØ'\n  }\n  return titleMap[type] || 'Êñ∞Ê∂àÊÅØ'\n}\n\n// Ê†ºÂºèÂåñÊó∂Èó¥\nfunction formatTime(timestamp: number): string {\n  const date = new Date(timestamp)\n  const now = new Date()\n  const diff = now.getTime() - date.getTime()\n\n  if (diff < 60000) {\n    return 'ÂàöÂàö'\n  } else if (diff < 3600000) {\n    return Math.floor(diff / 60000) + 'ÂàÜÈíüÂâç'\n  } else if (diff < 86400000) {\n    return Math.floor(diff / 3600000) + 'Â∞èÊó∂Ââç'\n  } else {\n    return Math.floor(diff / 86400000) + 'Â§©Ââç'\n  }\n}\n\n// Âä†ËΩΩÊ∂àÊÅØ\nasync function loadMessages() {\n  try {\n    const db = uniCloud.database()\n    const res = await db.collection('messages')\n      .where('receiver == $env.UNI_USER_ID || sender == $env.UNI_USER_ID')\n      .orderBy('timestamp', 'desc')\n      .limit(20)\n      .get()\n\n    messages.value = res.data as Message[]\n  } catch (e) {\n    uni.__f__('error','at pages/index/index.vue:267','Âä†ËΩΩÊ∂àÊÅØÂ§±Ë¥•:', e)\n    // Ê®°ÊãüÊï∞ÊçÆ\n    messages.value = [\n      {\n        _id: '1',\n        type: 'order',\n        title: 'ËÆ¢ÂçïÈÄöÁü•',\n        content: 'ÊÇ®ÁöÑË∑ëËÖøËÆ¢ÂçïÂ∑≤Êé•Âçï',\n        timestamp: Date.now(),\n        read: false\n      },\n      {\n        _id: '2',\n        type: 'comment',\n        title: 'Êñ∞ËØÑËÆ∫',\n        content: 'Áî®Êà∑AËØÑËÆ∫‰∫ÜÊÇ®ÁöÑÂ∏ñÂ≠ê',\n        timestamp: Date.now() - 3600000,\n        read: false\n      }\n    ] as Message[]\n  }\n}\n\n// Â§ÑÁêÜÁôªÂΩï\nasync function handleLogin() {\n  try {\n    uni.showLoading({ title: 'ÁôªÂΩï‰∏≠...' })\n\n    const loginRes = await uni.login({\n      provider: 'weixin'\n    })\n\n    uni.hideLoading()\n\n    // Â§ÑÁêÜËøîÂõûÂÄº - UTS ‰∏≠ uni.login ËøîÂõûÁöÑÊòØÂØπË±°Ôºå‰∏çÊòØÊï∞ÁªÑ\n    let code: string = ''\n\n    // Â∞ùËØïÂ§öÁßçÊñπÂºèËé∑Âèñ code\n    if (Array.isArray(loginRes)) {\n      const result = loginRes[1] || loginRes[0]\n      code = result?.code || ''\n    } else if (loginRes && typeof loginRes === 'object') {\n      code = (loginRes as any).code || ''\n    }\n\n    if (!code) {\n      uni.__f__('log','at pages/index/index.vue:313','uni.login ËøîÂõûÂÄº:', JSON.stringify(loginRes))\n      // ‰ΩøÁî®Ê®°Êãü codeÔºàÂºÄÂèëÊ®°ÂºèÔºâ\n      code = 'mock_code_' + Date.now()\n    }\n\n    // Ë∞ÉÁî® store ÁöÑ login ÊñπÊ≥ï\n    const result = await userStore.login(code)\n\n    if (result.success) {\n      uni.showToast({\n        title: result.message || 'ÁôªÂΩïÊàêÂäü',\n        icon: 'success'\n      })\n    } else {\n      uni.showToast({\n        title: result.message || 'ÁôªÂΩïÂ§±Ë¥•',\n        icon: 'none'\n      })\n    }\n  } catch (e) {\n    uni.hideLoading()\n    uni.__f__('error','at pages/index/index.vue:334','ÁôªÂΩïÈîôËØØ:', e)\n    // Áõ¥Êé•‰ΩøÁî®Ê®°ÊãüÁôªÂΩï\n    const result = await userStore.login('fallback_code_' + Date.now())\n    if (result.success) {\n      uni.showToast({\n        title: 'ÁôªÂΩïÊàêÂäüÔºàÁ¶ªÁ∫øÊ®°ÂºèÔºâ',\n        icon: 'success'\n      })\n    } else {\n      uni.showToast({\n        title: 'ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\n        icon: 'none'\n      })\n    }\n  }\n}\n\n// Â§ÑÁêÜÈÄÄÂá∫ÁôªÂΩï\nasync function handleLogout() {\n  try {\n    const res = await uni.showModal({\n      title: 'ÊèêÁ§∫',\n      content: 'Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü'\n    })\n\n    if (res.confirm) {\n      await userStore.logout()\n      uni.showToast({\n        title: 'Â∑≤ÈÄÄÂá∫ÁôªÂΩï',\n        icon: 'success'\n      })\n    }\n  } catch (e) {\n    uni.__f__('error','at pages/index/index.vue:367','ÈÄÄÂá∫ÁôªÂΩïÈîôËØØ:', e)\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// ÈáéÂÖΩÊ¥æÈÖçËâ≤ÊñπÊ°à\n$black: #000000;\n$white: #ffffff;\n$red: #FF6B6B;\n$teal: #4ECDC4;\n$yellow: #FFE66D;\n\n.page-container {\n  min-height: 100vh;\n  padding: 24rpx;\n  padding-bottom: 160rpx;\n  background: linear-gradient(180deg, #FFF9E6 0%, #ffffff 50%, #F0FFF4 100%);\n  position: relative;\n}\n\n// È°µÈù¢ËÉåÊôØÊ∂ÇÈ∏¶\n.page-doodle {\n  &-1 {\n    position: fixed;\n    top: 100rpx;\n    right: 40rpx;\n    font-size: 48rpx;\n    color: $teal;\n    opacity: 0.3;\n    animation: spin 12s linear infinite;\n    z-index: 0;\n  }\n\n  &-2 {\n    position: fixed;\n    top: 300rpx;\n    left: 30rpx;\n    font-size: 40rpx;\n    color: $yellow;\n    opacity: 0.4;\n    animation: pulse 3s ease-in-out infinite;\n    z-index: 0;\n  }\n\n  &-3 {\n    position: fixed;\n    top: 500rpx;\n    right: 60rpx;\n    font-size: 36rpx;\n    color: $red;\n    opacity: 0.25;\n    animation: spin 8s linear infinite reverse;\n    z-index: 0;\n  }\n}\n\n// Ê¨¢ËøéÂç°Áâá\n.welcome-card {\n  text-align: center;\n  padding: 48rpx 32rpx !important;\n  margin-bottom: 32rpx !important;\n\n  .welcome-title {\n    display: block;\n    font-size: 72rpx;\n    font-weight: 900;\n    color: $black;\n    margin-bottom: 16rpx;\n    letter-spacing: 4rpx;\n    text-transform: uppercase;\n  }\n\n  .welcome-subtitle {\n    display: block;\n    font-size: 28rpx;\n    color: #666;\n    font-weight: 600;\n    letter-spacing: 2rpx;\n  }\n\n  .welcome-decoration {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-top: 24rpx;\n    gap: 16rpx;\n\n    .deco-line {\n      width: 80rpx;\n      height: 4rpx;\n      background: $black;\n      border-radius: 2rpx;\n    }\n\n    .deco-star {\n      font-size: 32rpx;\n      color: $red;\n    }\n  }\n}\n\n// ÁôªÂΩïÂç°Áâá\n.login-card {\n  margin-bottom: 32rpx !important;\n\n  .login-content {\n    text-align: center;\n    padding: 16rpx 0;\n  }\n\n  .login-icon {\n    display: block;\n    font-size: 96rpx;\n    margin-bottom: 24rpx;\n    animation: wave 1s ease-in-out infinite;\n  }\n\n  .login-title {\n    display: block;\n    font-size: 36rpx;\n    font-weight: 900;\n    color: $black;\n    margin-bottom: 12rpx;\n  }\n\n  .login-desc {\n    display: block;\n    font-size: 26rpx;\n    color: #666;\n    margin-bottom: 32rpx;\n  }\n\n  .feature-tags {\n    display: flex;\n    justify-content: center;\n    gap: 16rpx;\n    margin-bottom: 32rpx;\n    flex-wrap: wrap;\n\n    .feature-tag {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: 16rpx 20rpx;\n      border: 3rpx solid $black;\n      background: $white;\n      box-shadow: 4rpx 4rpx 0 $black;\n\n      text:first-child {\n        font-size: 32rpx;\n        margin-bottom: 4rpx;\n      }\n\n      text:last-child {\n        font-size: 22rpx;\n        font-weight: 700;\n      }\n    }\n  }\n\n  .login-btn {\n    width: 100%;\n  }\n}\n\n// Áî®Êà∑Âç°Áâá\n.user-card {\n  margin-bottom: 32rpx !important;\n\n  .user-header {\n    display: flex;\n    align-items: center;\n    padding-bottom: 24rpx;\n    border-bottom: 3rpx dashed #ddd;\n    margin-bottom: 24rpx;\n  }\n\n  .user-avatar-wrapper {\n    position: relative;\n    width: 96rpx;\n    height: 96rpx;\n    border: 4rpx solid $black;\n    background: linear-gradient(135deg, $teal, #4ECDC4);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-right: 24rpx;\n    box-shadow: 4rpx 4rpx 0 $black;\n    cursor: pointer;\n  }\n\n  .edit-hint {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    width: 32rpx;\n    height: 32rpx;\n    background: $white;\n    border: 2rpx solid $black;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 18rpx;\n    box-shadow: 2rpx 2rpx 0 $black;\n  }\n\n  .user-avatar {\n    font-size: 48rpx;\n    font-weight: 900;\n    color: $white;\n  }\n\n  .user-info-section {\n    flex: 1;\n  }\n\n  .user-name {\n    display: block;\n    font-size: 36rpx;\n    font-weight: 900;\n    color: $black;\n    margin-bottom: 8rpx;\n  }\n\n  .user-campus {\n    display: flex;\n    align-items: center;\n    font-size: 24rpx;\n    color: #666;\n\n    .campus-icon {\n      font-size: 24rpx;\n      margin-right: 4rpx;\n    }\n  }\n\n  .profile-btn {\n    padding: 12rpx 24rpx !important;\n    font-size: 24rpx !important;\n  }\n\n  // Áî®Êà∑Ê†áÁ≠æ\n  .user-tags {\n    display: flex;\n    gap: 12rpx;\n    margin-bottom: 24rpx;\n    flex-wrap: wrap;\n  }\n\n  .user-tag {\n    padding: 8rpx 16rpx;\n    border: 2rpx solid $black;\n    background: $yellow;\n    font-size: 22rpx;\n    font-weight: 700;\n    box-shadow: 2rpx 2rpx 0 $black;\n  }\n\n  // Âø´Êç∑Êìç‰Ωú\n  .quick-actions {\n    display: flex;\n    flex-direction: column;\n    gap: 16rpx;\n  }\n\n  .action-item {\n    display: flex;\n    align-items: center;\n    padding: 20rpx 24rpx;\n    border: 3rpx solid $black;\n    background: $white;\n    box-shadow: 4rpx 4rpx 0 $teal;\n    transition: all 0.2s ease;\n\n    .action-icon {\n      font-size: 36rpx;\n      margin-right: 16rpx;\n    }\n\n    .action-name {\n      flex: 1;\n      font-size: 28rpx;\n      font-weight: 700;\n    }\n\n    .action-arrow {\n      font-size: 28rpx;\n      color: $black;\n    }\n\n    &:active {\n      transform: translate(2rpx, 2rpx);\n      box-shadow: 2rpx 2rpx 0 $teal;\n    }\n  }\n}\n\n// Ê∂àÊÅØÊùøÂùó\n.message-section {\n  margin-bottom: 32rpx !important;\n\n  .message-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 20rpx;\n  }\n\n  .message-title {\n    font-size: 32rpx;\n    font-weight: 900;\n    color: $black;\n  }\n\n  .message-unread {\n    position: relative;\n  }\n\n  .unread-badge {\n    position: absolute;\n    top: -12rpx;\n    right: -12rpx;\n    min-width: 32rpx;\n    height: 32rpx;\n    padding: 0 8rpx;\n    border-radius: 16rpx;\n    background: $red;\n    color: $white;\n    font-size: 20rpx;\n    font-weight: 900;\n    text-align: center;\n    line-height: 32rpx;\n    box-shadow: 2rpx 2rpx 0 $black;\n  }\n\n  .message-list {\n    display: flex;\n    flex-direction: column;\n    gap: 12rpx;\n  }\n\n  .message-item {\n    display: flex;\n    align-items: center;\n    gap: 16rpx;\n    padding: 12rpx;\n    border: 2rpx solid #eee;\n    border-radius: 8rpx;\n    transition: all 0.2s ease;\n\n    &:active {\n      background: #f9f9f9;\n    }\n\n    .message-icon {\n      width: 56rpx;\n      height: 56rpx;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 28rpx;\n      box-shadow: 2rpx 2rpx 0 $black;\n\n      &-order {\n        background: $yellow;\n      }\n\n      &-comment {\n        background: #FFE0E0;\n      }\n\n      &-like {\n        background: #E0FFE0;\n      }\n\n      &-system {\n        background: #E0E8FF;\n      }\n    }\n\n    .message-content {\n      flex: 1;\n      min-width: 0;\n    }\n\n    .message-title-text {\n      display: block;\n      font-size: 26rpx;\n      font-weight: 700;\n      color: $black;\n      margin-bottom: 4rpx;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .message-preview {\n      display: block;\n      font-size: 22rpx;\n      color: #999;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .message-time {\n      font-size: 20rpx;\n      color: #999;\n      flex-shrink: 0;\n    }\n  }\n\n  .no-messages {\n    text-align: center;\n    padding: 40rpx 0;\n  }\n\n  .no-messages-icon {\n    display: block;\n    font-size: 48rpx;\n    margin-bottom: 12rpx;\n    opacity: 0.5;\n  }\n\n  .no-messages-text {\n    display: block;\n    font-size: 24rpx;\n    color: #999;\n  }\n\n  .view-all-btn {\n    width: 100%;\n    margin-top: 16rpx;\n  }\n}\n\n// Âä®Áîª\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n@keyframes pulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.15); }\n}\n\n@keyframes wave {\n  0%, 100% { transform: rotate(0deg); }\n  25% { transform: rotate(15deg); }\n  75% { transform: rotate(-15deg); }\n}\n</style>\n","import MiniProgramPage from 'E:/codeplace/test/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["BrutalistCard","BrutalistButton","TabBar","userStore","useUserStore","messages","ref","unreadCount","computed","value","filter","m","read","length","goToPage","page","uni","switchTab","url","goToProfile","navigateTo","goToMessages","getMessageTitle","type","order","comment","like","system","chat","formatTime","timestamp","date","Date","diff","getTime","Math","floor","async","loadMessages","db","uniCloud","database","res","collection","where","orderBy","limit","get","data","e","index","__f__","_id","title","content","now","handleLogin","showLoading","loginRes","login","provider","hideLoading","code","Array","isArray","result","JSON","stringify","success","showToast","message","icon","onMounted","checkLoginStatus","isLoggedIn","onShow","wx","createPage","MiniProgramPage"],"mappings":"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"}