{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"page-container\">\n    <!-- é¡µé¢èƒŒæ™¯è£…é¥° -->\n    <view class=\"page-doodle-1\">âœ¦</view>\n    <view class=\"page-doodle-2\">â—‰</view>\n    <view class=\"page-doodle-3\">â˜†</view>\n\n    <!-- æ¬¢è¿å¡ç‰‡ -->\n    <brutalist-card class=\"welcome-card\" taped accent doodle>\n      <text class=\"welcome-title\">æ ¡è¶£é—ªæ­</text>\n      <text class=\"welcome-subtitle\">æ ¡å›­ç”Ÿæ´»æœåŠ¡å¹³å°</text>\n      <view class=\"welcome-decoration\">\n        <text class=\"deco-line\"></text>\n        <text class=\"deco-star\">â˜…</text>\n        <text class=\"deco-line\"></text>\n      </view>\n    </brutalist-card>\n\n    <!-- ç™»å½•æç¤ºå¡ç‰‡ -->\n    <brutalist-card v-if=\"!userStore.isLoggedIn\" class=\"login-card\" dashed>\n      <view class=\"login-content\">\n        <text class=\"login-icon\">ğŸ‘‹</text>\n        <text class=\"login-title\">æ¬¢è¿æ¥åˆ°æ ¡è¶£</text>\n        <text class=\"login-desc\">ç™»å½•åå¯ä½¿ç”¨å…¨éƒ¨åŠŸèƒ½</text>\n\n        <view class=\"feature-tags\">\n          <view class=\"feature-tag\">\n            <text>ğŸ“</text>\n            <text>å‘å¸–äº¤æµ</text>\n          </view>\n          <view class=\"feature-tag\">\n            <text>ğŸ‘¥</text>\n            <text>å¯»æ‰¾æ­å­</text>\n          </view>\n          <view class=\"feature-tag\">\n            <text>ğŸ“¦</text>\n            <text>è·‘è…¿æœåŠ¡</text>\n          </view>\n        </view>\n\n        <brutalist-button\n          class=\"login-btn\"\n          accent\n          taped\n          arrow\n          large\n          @click=\"handleLogin\"\n        >\n          ç«‹å³ç™»å½•\n        </brutalist-button>\n      </view>\n    </brutalist-card>\n\n    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->\n    <brutalist-card v-else class=\"user-card\" taped>\n      <view class=\"user-header\">\n        <view class=\"user-avatar-wrapper\">\n          <text class=\"user-avatar\">{{ userStore.user?.nickname?.charAt(0) || 'U' }}</text>\n        </view>\n        <view class=\"user-info-section\">\n          <text class=\"user-name\">{{ userStore.user?.nickname || 'æ ¡å›­ç”¨æˆ·' }}</text>\n          <view class=\"user-campus\">\n            <text class=\"campus-icon\">ğŸ“</text>\n            <text>{{ userStore.user?.campus || 'æœªè®¾ç½®æ ¡åŒº' }}</text>\n          </view>\n        </view>\n        <brutalist-button class=\"logout-btn\" outline @click=\"handleLogout\">\n          é€€å‡º\n        </brutalist-button>\n      </view>\n\n      <!-- ç”¨æˆ·æ ‡ç­¾ -->\n      <view v-if=\"userStore.user?.tags && userStore.user.tags.length > 0\" class=\"user-tags\">\n        <view\n          v-for=\"(tag, index) in userStore.user.tags\"\n          :key=\"index\"\n          class=\"user-tag\"\n        >\n          {{ tag }}\n        </view>\n      </view>\n\n      <!-- åŠŸèƒ½å…¥å£ -->\n      <view class=\"quick-actions\">\n        <view class=\"action-item\" @click=\"goToPage('buddy')\">\n          <text class=\"action-icon\">ğŸ‘¥</text>\n          <text class=\"action-name\">æ‰¾æ­å­</text>\n          <text class=\"action-arrow\">â†’</text>\n        </view>\n        <view class=\"action-item\" @click=\"goToPage('delivery')\">\n          <text class=\"action-icon\">ğŸ“¦</text>\n          <text class=\"action-name\">è·‘è…¿</text>\n          <text class=\"action-arrow\">â†’</text>\n        </view>\n        <view class=\"action-item\" @click=\"goToPage('forum')\">\n          <text class=\"action-icon\">ğŸ“</text>\n          <text class=\"action-name\">è®ºå›</text>\n          <text class=\"action-arrow\">â†’</text>\n        </view>\n      </view>\n    </brutalist-card>\n\n    <!-- æç¤ºåŒºåŸŸ -->\n    <view v-if=\"userStore.isLoggedIn\" class=\"tips-section\">\n      <brutalist-card class=\"tips-card\" dashed>\n        <text class=\"tips-icon\">ğŸ’¡</text>\n        <text class=\"tips-text\">ç‚¹å‡»åº•éƒ¨å¯¼èˆªæ åˆ‡æ¢åŠŸèƒ½æ¨¡å—</text>\n      </brutalist-card>\n    </view>\n\n    <!-- åº•éƒ¨å¯¼èˆªæ  -->\n    <TabBar />\n  </view>\n</template>\n\n<script setup lang=\"uts\">\nimport { ref, onMounted } from 'vue'\nimport { useUserStore } from '@/stores/user'\nimport BrutalistCard from '@/components/brutalist/BrutalistCard.vue'\nimport BrutalistButton from '@/components/brutalist/BrutalistButton.vue'\nimport TabBar from '@/components/brutalist/TabBar.vue'\n\nconst userStore = useUserStore()\n\n// é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç™»å½•çŠ¶æ€\nonMounted(() => {\n  userStore.checkLoginStatus()\n})\n\n// é¡µé¢è·³è½¬\nfunction goToPage(page: string) {\n  uni.switchTab({\n    url: `/pages/${page}/index`\n  })\n}\n\n// å¤„ç†ç™»å½•\nasync function handleLogin() {\n  try {\n    uni.showLoading({ title: 'ç™»å½•ä¸­...' })\n\n    const loginRes = await uni.login({\n      provider: 'weixin'\n    })\n\n    uni.hideLoading()\n\n    // å¤„ç†è¿”å›å€¼ - UTS ä¸­ uni.login è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯æ•°ç»„\n    let code: string = ''\n\n    // å°è¯•å¤šç§æ–¹å¼è·å– code\n    if (Array.isArray(loginRes)) {\n      const result = loginRes[1] || loginRes[0]\n      code = result?.code || ''\n    } else if (loginRes && typeof loginRes === 'object') {\n      code = (loginRes as any).code || ''\n    }\n\n    if (!code) {\n      uni.__f__('log','at pages/index/index.vue:160','uni.login è¿”å›å€¼:', JSON.stringify(loginRes))\n      // ä½¿ç”¨æ¨¡æ‹Ÿ codeï¼ˆå¼€å‘æ¨¡å¼ï¼‰\n      code = 'mock_code_' + Date.now()\n    }\n\n    // è°ƒç”¨ store çš„ login æ–¹æ³•\n    const result = await userStore.login(code)\n\n    if (result.success) {\n      uni.showToast({\n        title: result.message || 'ç™»å½•æˆåŠŸ',\n        icon: 'success'\n      })\n    } else {\n      uni.showToast({\n        title: result.message || 'ç™»å½•å¤±è´¥',\n        icon: 'none'\n      })\n    }\n  } catch (e) {\n    uni.hideLoading()\n    uni.__f__('error','at pages/index/index.vue:181','ç™»å½•é”™è¯¯:', e)\n    // ç›´æ¥ä½¿ç”¨æ¨¡æ‹Ÿç™»å½•\n    const result = await userStore.login('fallback_code_' + Date.now())\n    if (result.success) {\n      uni.showToast({\n        title: 'ç™»å½•æˆåŠŸï¼ˆç¦»çº¿æ¨¡å¼ï¼‰',\n        icon: 'success'\n      })\n    } else {\n      uni.showToast({\n        title: 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',\n        icon: 'none'\n      })\n    }\n  }\n}\n\n// å¤„ç†é€€å‡ºç™»å½•\nasync function handleLogout() {\n  try {\n    const res = await uni.showModal({\n      title: 'æç¤º',\n      content: 'ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ'\n    })\n\n    if (res.confirm) {\n      await userStore.logout()\n      uni.showToast({\n        title: 'å·²é€€å‡ºç™»å½•',\n        icon: 'success'\n      })\n    }\n  } catch (e) {\n    uni.__f__('error','at pages/index/index.vue:214','é€€å‡ºç™»å½•é”™è¯¯:', e)\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// é‡å…½æ´¾é…è‰²æ–¹æ¡ˆ\n$black: #000000;\n$white: #ffffff;\n$red: #FF6B6B;\n$teal: #4ECDC4;\n$yellow: #FFE66D;\n\n.page-container {\n  min-height: 100vh;\n  padding: 24rpx;\n  padding-bottom: 160rpx;\n  background: linear-gradient(180deg, #FFF9E6 0%, #ffffff 50%, #F0FFF4 100%);\n  position: relative;\n}\n\n// é¡µé¢èƒŒæ™¯æ¶‚é¸¦\n.page-doodle {\n  &-1 {\n    position: fixed;\n    top: 100rpx;\n    right: 40rpx;\n    font-size: 48rpx;\n    color: $teal;\n    opacity: 0.3;\n    animation: spin 12s linear infinite;\n    z-index: 0;\n  }\n\n  &-2 {\n    position: fixed;\n    top: 300rpx;\n    left: 30rpx;\n    font-size: 40rpx;\n    color: $yellow;\n    opacity: 0.4;\n    animation: pulse 3s ease-in-out infinite;\n    z-index: 0;\n  }\n\n  &-3 {\n    position: fixed;\n    top: 500rpx;\n    right: 60rpx;\n    font-size: 36rpx;\n    color: $red;\n    opacity: 0.25;\n    animation: spin 8s linear infinite reverse;\n    z-index: 0;\n  }\n}\n\n// æ¬¢è¿å¡ç‰‡\n.welcome-card {\n  text-align: center;\n  padding: 48rpx 32rpx !important;\n  margin-bottom: 32rpx !important;\n\n  .welcome-title {\n    display: block;\n    font-size: 72rpx;\n    font-weight: 900;\n    color: $black;\n    margin-bottom: 16rpx;\n    letter-spacing: 4rpx;\n    text-transform: uppercase;\n  }\n\n  .welcome-subtitle {\n    display: block;\n    font-size: 28rpx;\n    color: #666;\n    font-weight: 600;\n    letter-spacing: 2rpx;\n  }\n\n  .welcome-decoration {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-top: 24rpx;\n    gap: 16rpx;\n\n    .deco-line {\n      width: 80rpx;\n      height: 4rpx;\n      background: $black;\n      border-radius: 2rpx;\n    }\n\n    .deco-star {\n      font-size: 32rpx;\n      color: $red;\n    }\n  }\n}\n\n// ç™»å½•å¡ç‰‡\n.login-card {\n  margin-bottom: 32rpx !important;\n\n  .login-content {\n    text-align: center;\n    padding: 16rpx 0;\n  }\n\n  .login-icon {\n    display: block;\n    font-size: 96rpx;\n    margin-bottom: 24rpx;\n    animation: wave 1s ease-in-out infinite;\n  }\n\n  .login-title {\n    display: block;\n    font-size: 36rpx;\n    font-weight: 900;\n    color: $black;\n    margin-bottom: 12rpx;\n  }\n\n  .login-desc {\n    display: block;\n    font-size: 26rpx;\n    color: #666;\n    margin-bottom: 32rpx;\n  }\n\n  .feature-tags {\n    display: flex;\n    justify-content: center;\n    gap: 16rpx;\n    margin-bottom: 32rpx;\n    flex-wrap: wrap;\n\n    .feature-tag {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: 16rpx 20rpx;\n      border: 3rpx solid $black;\n      background: $white;\n      box-shadow: 4rpx 4rpx 0 $black;\n\n      text:first-child {\n        font-size: 32rpx;\n        margin-bottom: 4rpx;\n      }\n\n      text:last-child {\n        font-size: 22rpx;\n        font-weight: 700;\n      }\n    }\n  }\n\n  .login-btn {\n    width: 100%;\n  }\n}\n\n// ç”¨æˆ·å¡ç‰‡\n.user-card {\n  margin-bottom: 32rpx !important;\n\n  .user-header {\n    display: flex;\n    align-items: center;\n    padding-bottom: 24rpx;\n    border-bottom: 3rpx dashed #ddd;\n    margin-bottom: 24rpx;\n  }\n\n  .user-avatar-wrapper {\n    width: 96rpx;\n    height: 96rpx;\n    border: 4rpx solid $black;\n    background: linear-gradient(135deg, $teal, #4ECDC4);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-right: 24rpx;\n    box-shadow: 4rpx 4rpx 0 $black;\n  }\n\n  .user-avatar {\n    font-size: 48rpx;\n    font-weight: 900;\n    color: $white;\n  }\n\n  .user-info-section {\n    flex: 1;\n  }\n\n  .user-name {\n    display: block;\n    font-size: 36rpx;\n    font-weight: 900;\n    color: $black;\n    margin-bottom: 8rpx;\n  }\n\n  .user-campus {\n    display: flex;\n    align-items: center;\n    font-size: 24rpx;\n    color: #666;\n\n    .campus-icon {\n      font-size: 24rpx;\n      margin-right: 4rpx;\n    }\n  }\n\n  .logout-btn {\n    padding: 12rpx 24rpx !important;\n    font-size: 24rpx !important;\n  }\n\n  // ç”¨æˆ·æ ‡ç­¾\n  .user-tags {\n    display: flex;\n    gap: 12rpx;\n    margin-bottom: 24rpx;\n    flex-wrap: wrap;\n  }\n\n  .user-tag {\n    padding: 8rpx 16rpx;\n    border: 2rpx solid $black;\n    background: $yellow;\n    font-size: 22rpx;\n    font-weight: 700;\n    box-shadow: 2rpx 2rpx 0 $black;\n  }\n\n  // å¿«æ·æ“ä½œ\n  .quick-actions {\n    display: flex;\n    flex-direction: column;\n    gap: 16rpx;\n  }\n\n  .action-item {\n    display: flex;\n    align-items: center;\n    padding: 20rpx 24rpx;\n    border: 3rpx solid $black;\n    background: $white;\n    box-shadow: 4rpx 4rpx 0 $teal;\n    transition: all 0.2s ease;\n\n    .action-icon {\n      font-size: 36rpx;\n      margin-right: 16rpx;\n    }\n\n    .action-name {\n      flex: 1;\n      font-size: 28rpx;\n      font-weight: 700;\n    }\n\n    .action-arrow {\n      font-size: 28rpx;\n      color: $black;\n    }\n\n    &:active {\n      transform: translate(2rpx, 2rpx);\n      box-shadow: 2rpx 2rpx 0 $teal;\n    }\n  }\n}\n\n// æç¤ºåŒºåŸŸ\n.tips-section {\n  margin-bottom: 32rpx;\n}\n\n.tips-card {\n  text-align: center;\n  padding: 24rpx !important;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12rpx;\n\n  .tips-icon {\n    font-size: 32rpx;\n  }\n\n  .tips-text {\n    font-size: 24rpx;\n    color: #666;\n  }\n}\n\n// åŠ¨ç”»\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n@keyframes pulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.15); }\n}\n\n@keyframes wave {\n  0%, 100% { transform: rotate(0deg); }\n  25% { transform: rotate(15deg); }\n  75% { transform: rotate(-15deg); }\n}\n</style>\n","import MiniProgramPage from 'E:/codeplace/test/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["BrutalistCard","BrutalistButton","TabBar","userStore","useUserStore","goToPage","page","uni","switchTab","url","async","handleLogin","showLoading","title","loginRes","index","login","provider","hideLoading","code","Array","isArray","result","__f__","JSON","stringify","Date","now","success","showToast","message","icon","e","handleLogout","showModal","content","confirm","logout","onMounted","checkLoginStatus","wx","createPage","MiniProgramPage"],"mappings":"yGAsHA,MAAAA,EAA0B,IAAA,8CAC1BC,EAA4B,IAAA,gDAC5BC,EAAmB,IAAA,oFAEb,MAAAC,EAAYC,EAAAA,eAQlB,SAASC,EAASC,GAChBC,EAAAA,MAAIC,UAAU,CACZC,IAAK,UAAUH,WAEnB,CAGAI,eAAeC,IACT,IACFJ,EAAAA,MAAIK,YAAY,CAAEC,MAAO,WAEnB,MAAAC,QAAiBP,EAAAQ,MAAIC,MAAM,CAC/BC,SAAU,WAGZV,EAAAQ,MAAIG,cAGJ,IAAIC,EAAe,GAGf,GAAAC,MAAMC,QAAQP,GAAW,CAC3B,MAAMQ,EAASR,EAAS,IAAMA,EAAS,GACvCK,SAAOG,WAAQH,OAAQ,EACd,MAAAL,GAAgC,iBAAbA,IAC5BK,EAAQL,EAAiBK,MAAQ,IAG9BA,YACCI,MAAM,MAAM,+BAA+B,iBAAkBC,KAAKC,UAAUX,IAEzEK,EAAA,aAAeO,KAAKC,OAI7B,MAAML,QAAenB,EAAUa,MAAMG,GAEjCG,EAAOM,QACTrB,EAAAA,MAAIsB,UAAU,CACZhB,MAAOS,EAAOQ,SAAW,OACzBC,KAAM,YAGRxB,EAAAA,MAAIsB,UAAU,CACZhB,MAAOS,EAAOQ,SAAW,OACzBC,KAAM,QAmBZ,OAhBSC,GACPzB,EAAAQ,MAAIG,cACJX,EAAAQ,MAAIQ,MAAM,QAAQ,+BAA+B,QAASS,UAErC7B,EAAUa,MAAM,iBAAmBU,KAAKC,QAClDC,QACTrB,EAAAA,MAAIsB,UAAU,CACZhB,MAAO,aACPkB,KAAM,YAGRxB,EAAAA,MAAIsB,UAAU,CACZhB,MAAO,WACPkB,KAAM,QAGZ,CACF,CAGArB,eAAeuB,IACT,WACgB1B,EAAAQ,MAAImB,UAAU,CAC9BrB,MAAO,KACPsB,QAAS,eAGHC,gBACAjC,EAAUkC,SAChB9B,EAAAA,MAAIsB,UAAU,CACZhB,MAAO,QACPkB,KAAM,YAKZ,OAFSC,GACPzB,EAAAQ,MAAIQ,MAAM,QAAQ,+BAA+B,UAAWS,EAC9D,CACF,QA1FAM,EAAAA,WAAU,KACRnC,EAAUoC,kBAAiB,62BC7H7BC,GAAGC,WAAWC"}