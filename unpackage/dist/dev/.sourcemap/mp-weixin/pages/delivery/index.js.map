{"version":3,"file":"index.js","sources":["pages/delivery/index.vue","../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGVsaXZlcnkvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"page-container\">\n    <!-- È°µÈù¢ËÉåÊôØË£ÖÈ•∞ -->\n    <view class=\"page-doodle-1\">‚ú¶</view>\n    <view class=\"page-doodle-2\">‚óâ</view>\n\n    <!-- È°µÈù¢Ê†áÈ¢òÂç°Áâá -->\n    <brutalist-card class=\"page-header\" taped accent>\n      <text class=\"page-title\">Ê†°Âõ≠Ë∑ëËÖø</text>\n      <text class=\"page-subtitle\">‰∫íÂä©‰æøÂà©ÔºåËΩªÊùæÊêûÂÆö</text>\n    </brutalist-card>\n\n    <!-- È°∂ÈÉ®Êìç‰ΩúÊ†è -->\n    <view class=\"header-actions\">\n      <brutalist-button class=\"create-btn\" accent taped arrow @click=\"navigateToCreate\">\n        + ÂèëÂ∏ÉÈúÄÊ±Ç\n      </brutalist-button>\n    </view>\n\n    <!-- Áä∂ÊÄÅÁ≠õÈÄâÊ†áÁ≠æ -->\n    <view class=\"status-tabs\">\n      <view\n        v-for=\"status in statusTabs\"\n        :key=\"status.value\"\n        class=\"status-tab\"\n        :class=\"{ 'active': currentStatus === status.value }\"\n        @click=\"changeStatus(status.value)\"\n      >\n        <text class=\"tab-emoji\">{{ status.emoji }}</text>\n        <text class=\"tab-label\">{{ status.label }}</text>\n      </view>\n    </view>\n\n    <!-- ËØ∑Ê±ÇÂàóË°® -->\n    <view class=\"request-list\">\n      <view\n        v-for=\"request in filteredRequests\"\n        :key=\"request._id\"\n        class=\"request-card-wrapper\"\n        @click=\"viewDetail(request)\"\n      >\n        <brutalist-card class=\"request-card\">\n          <view class=\"request-header\">\n            <text class=\"request-title\">{{ request.title }}</text>\n            <view class=\"request-status\" :class=\"'status-' + request.status\">\n              <text>{{ getStatusIcon(request.status) }}</text>\n              <text>{{ getStatusText(request.status) }}</text>\n            </view>\n          </view>\n\n          <text class=\"request-desc\">{{ request.description }}</text>\n\n          <view class=\"request-tags\">\n            <view\n              v-for=\"tag in request.tags\"\n              :key=\"tag\"\n              class=\"tag-badge\"\n            >\n              <text>{{ getTagEmoji(tag) }}</text>\n              <text>{{ tag }}</text>\n            </view>\n          </view>\n\n          <view class=\"request-footer\">\n            <view class=\"request-time\">\n              <text>‚è∞</text>\n              <text>{{ formatTime(request.createTime) }}</text>\n            </view>\n            <view v-if=\"request.amount\" class=\"amount\">\n              <text>üí∞</text>\n              <text>¬•{{ request.amount }}</text>\n            </view>\n          </view>\n        </brutalist-card>\n      </view>\n    </view>\n\n    <!-- Á©∫Áä∂ÊÄÅ -->\n    <view v-if=\"filteredRequests.length === 0\" class=\"empty-state\">\n      <brutalist-card class=\"empty-card\" dashed>\n        <text class=\"empty-icon\">üì¶</text>\n        <text class=\"empty-text\">ÊöÇÊó†Áõ∏ÂÖ≥ÈúÄÊ±Ç</text>\n        <text class=\"empty-hint\">ÂèëÂ∏É‰∏Ä‰∏™Ë∑ëËÖø‰ªªÂä°ÂêßÔºÅ</text>\n      </brutalist-card>\n    </view>\n\n    <!-- Â∫ïÈÉ®ÂØºËà™Ê†è -->\n    <TabBar />\n  </view>\n</template>\n\n<script setup lang=\"uts\">\nimport { ref, computed, onMounted } from 'vue'\nimport { useUserStore } from '@/stores/user'\nimport BrutalistCard from '@/components/brutalist/BrutalistCard.vue'\nimport BrutalistButton from '@/components/brutalist/BrutalistButton.vue'\nimport TabBar from '@/components/brutalist/TabBar.vue'\n\n// ÂÆö‰πâËØ∑Ê±ÇÊé•Âè£\ninterface DeliveryRequest {\n  _id: string\n  title: string\n  description: string\n  tags: string[]\n  status: string\n  createTime: number\n  amount?: number\n  creator: string\n}\n\nconst userStore = useUserStore()\n\nconst requests = ref<DeliveryRequest[]>([])\nconst currentStatus = ref<string>('all')\n\n// Áä∂ÊÄÅÊ†áÁ≠æÈ°µÔºàÂ∏¶emojiÔºâ\nconst statusTabs = [\n  { label: 'ÂÖ®ÈÉ®', value: 'all', emoji: 'üìã' },\n  { label: 'ÂæÖÊé•Âçï', value: 'open', emoji: 'üî•' },\n  { label: 'ËøõË°å‰∏≠', value: 'in_progress', emoji: '‚è≥' },\n  { label: 'Â∑≤ÂÆåÊàê', value: 'completed', emoji: '‚úÖ' }\n]\n\n// Ëé∑ÂèñÊ†áÁ≠æemoji\nfunction getTagEmoji(tag: string): string {\n  const emojiMap: Record<string, string> = {\n    'ÂèñÂø´ÈÄí': 'üì¶',\n    '‰π∞È•≠': 'üçú',\n    'ÊâìÂç∞': 'üìÑ',\n    '‰ª£Ë¥≠': 'üõí',\n    'ÈÄÅ‰∏úË•ø': 'üöö',\n    'ÂÖ∂‰ªñ': 'üìå'\n  }\n  return emojiMap[tag] || 'üè∑Ô∏è'\n}\n\n// Á≠õÈÄâÂêéÁöÑËØ∑Ê±Ç\nconst filteredRequests = computed(() => {\n  if (currentStatus.value === 'all') {\n    return requests.value\n  }\n  return requests.value.filter(request => request.status === currentStatus.value)\n})\n\n// ÂàáÊç¢Áä∂ÊÄÅ\nfunction changeStatus(status: string) {\n  currentStatus.value = status\n}\n\n// Ëé∑ÂèñÁä∂ÊÄÅÊñáÊú¨\nfunction getStatusText(status: string): string {\n  const statusMap: Record<string, string> = {\n    'open': 'ÂæÖÊé•Âçï',\n    'in_progress': 'ËøõË°å‰∏≠',\n    'completed': 'Â∑≤ÂÆåÊàê',\n    'cancelled': 'Â∑≤ÂèñÊ∂à'\n  }\n  return statusMap[status] || status\n}\n\n// Ëé∑ÂèñÁä∂ÊÄÅÂõæÊ†á\nfunction getStatusIcon(status: string): string {\n  const iconMap: Record<string, string> = {\n    'open': 'üî•',\n    'in_progress': '‚è≥',\n    'completed': '‚úÖ',\n    'cancelled': '‚ùå'\n  }\n  return iconMap[status] || 'üìå'\n}\n\n// Ê†ºÂºèÂåñÊó∂Èó¥\nfunction formatTime(timestamp: number): string {\n  const date = new Date(timestamp)\n  const now = new Date()\n  const diff = now.getTime() - date.getTime()\n\n  if (diff < 60000) {\n    return 'ÂàöÂàö'\n  } else if (diff < 3600000) {\n    return Math.floor(diff / 60000) + 'ÂàÜÈíüÂâç'\n  } else if (diff < 86400000) {\n    return Math.floor(diff / 3600000) + 'Â∞èÊó∂Ââç'\n  } else {\n    return Math.floor(diff / 86400000) + 'Â§©Ââç'\n  }\n}\n\n// ÂØºËà™Âà∞ÂàõÂª∫È°µÈù¢\nfunction navigateToCreate() {\n  if (!userStore.isLoggedIn) {\n    uni.showToast({\n      title: 'ËØ∑ÂÖàÁôªÂΩï',\n      icon: 'none'\n    })\n    return\n  }\n\n  uni.navigateTo({\n    url: '/pages/delivery/create'\n  })\n}\n\n// Êü•ÁúãËØ¶ÊÉÖ\nfunction viewDetail(request: DeliveryRequest) {\n  uni.navigateTo({\n    url: `/pages/delivery/detail?id=${request._id}`\n  })\n}\n\n// Âä†ËΩΩÊï∞ÊçÆ\nasync function loadRequests() {\n  try {\n    const db = uniCloud.database()\n    const res = await db.collection('requests')\n      .where({\n        type: 'delivery'\n      })\n      .orderBy('createTime', 'desc')\n      .get()\n\n    requests.value = res.data as DeliveryRequest[]\n  } catch (e) {\n    uni.__f__('error','at pages/delivery/index.vue:224','Âä†ËΩΩÂ§±Ë¥•:', e)\n    // ‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ\n    requests.value = [\n      {\n        _id: '1',\n        title: 'Â∏ÆÂøôÂèñ‰∏™Âø´ÈÄí',\n        description: 'ËèúÈ∏üÈ©øÁ´ôÊúâ‰∏™‰∏≠‰ª∂Âø´ÈÄíÔºåÂ∏ÆÂøôÂèñÂà∞ÂçóÂå∫ÂÆøËàçÊ•º‰∏ãÔºåÊÑüÊøÄ‰∏çÂ∞ΩÔºÅ',\n        tags: ['ÂèñÂø´ÈÄí'],\n        status: 'open',\n        createTime: Date.now() - 1800000,\n        amount: 5,\n        creator: 'user1'\n      },\n      {\n        _id: '2',\n        title: '‰∫åÈ£üÂ†Ç‰π∞‰ªΩÈªÑÁÑñÈ∏°',\n        description: '‰∫åÈ£üÂ†ÇÈªÑÁÑñÈ∏°Á±≥È•≠ÔºåË¶ÅÂæÆËæ£ÔºåÈÄÅÂà∞Âõæ‰π¶È¶ÜÈó®Âè£„ÄÇ',\n        tags: ['‰π∞È•≠'],\n        status: 'open',\n        createTime: Date.now() - 5400000,\n        amount: 8,\n        creator: 'user2'\n      }\n    ] as DeliveryRequest[]\n  }\n}\n\nonMounted(() => {\n  loadRequests()\n})\n</script>\n\n<style lang=\"scss\" scoped>\n// ÈáéÂÖΩÊ¥æÈÖçËâ≤ÊñπÊ°à\n$black: #000000;\n$white: #ffffff;\n$red: #FF6B6B;\n$teal: #4ECDC4;\n$yellow: #FFE66D;\n\n.page-container {\n  min-height: 100vh;\n  padding: 24rpx;\n  padding-bottom: 160rpx;\n  background: linear-gradient(180deg, #FFF9E6 0%, #ffffff 50%, #FFE6F0 100%);\n  position: relative;\n}\n\n// È°µÈù¢ËÉåÊôØÊ∂ÇÈ∏¶\n.page-doodle {\n  &-1 {\n    position: fixed;\n    top: 140rpx;\n    right: 35rpx;\n    font-size: 42rpx;\n    color: $teal;\n    opacity: 0.3;\n    animation: spin 11s linear infinite;\n    z-index: 0;\n  }\n\n  &-2 {\n    position: fixed;\n    top: 380rpx;\n    left: 35rpx;\n    font-size: 38rpx;\n    color: $yellow;\n    opacity: 0.35;\n    animation: pulse 2.3s ease-in-out infinite;\n    z-index: 0;\n  }\n}\n\n// È°µÈù¢Ê†áÈ¢òÂç°Áâá\n.page-header {\n  text-align: center;\n  padding: 32rpx 24rpx !important;\n  margin-bottom: 24rpx !important;\n\n  .page-title {\n    display: block;\n    font-size: 48rpx;\n    font-weight: 900;\n    color: $black;\n    margin-bottom: 8rpx;\n    letter-spacing: 2rpx;\n  }\n\n  .page-subtitle {\n    display: block;\n    font-size: 24rpx;\n    color: #666;\n  }\n}\n\n// È°∂ÈÉ®Êìç‰ΩúÊ†è\n.header-actions {\n  margin-bottom: 24rpx;\n\n  .create-btn {\n    width: 100%;\n  }\n}\n\n// Áä∂ÊÄÅÊ†áÁ≠æ\n.status-tabs {\n  display: flex;\n  gap: 12rpx;\n  margin-bottom: 32rpx;\n  overflow-x: auto;\n  padding-bottom: 8rpx;\n\n  .status-tab {\n    display: flex;\n    align-items: center;\n    gap: 6rpx;\n    padding: 10rpx 18rpx;\n    border: 3rpx solid $black;\n    background: $white;\n    box-shadow: 3rpx 3rpx 0 $black;\n    white-space: nowrap;\n    transition: all 0.2s ease;\n\n    .tab-emoji {\n      font-size: 22rpx;\n    }\n\n    .tab-label {\n      font-size: 24rpx;\n      font-weight: 700;\n    }\n\n    &.active {\n      background: $red;\n      color: $white;\n      box-shadow: 3rpx 3rpx 0 $black;\n      transform: translate(-1rpx, -1rpx);\n    }\n\n    &:active {\n      transform: translate(2rpx, 2rpx);\n      box-shadow: 1rpx 1rpx 0 $black;\n    }\n  }\n}\n\n// ËØ∑Ê±ÇÂàóË°®\n.request-list {\n  .request-card-wrapper {\n    margin-bottom: 24rpx;\n  }\n\n  .request-card {\n    padding: 24rpx !important;\n    margin: 0 !important;\n    cursor: pointer;\n  }\n\n  .request-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 16rpx;\n    gap: 12rpx;\n\n    .request-title {\n      font-size: 32rpx;\n      font-weight: 900;\n      color: $black;\n      flex: 1;\n      line-height: 1.3;\n    }\n\n    .request-status {\n      display: flex;\n      align-items: center;\n      gap: 4rpx;\n      padding: 6rpx 12rpx;\n      border: 2rpx solid $black;\n      background: $white;\n      font-size: 22rpx;\n      font-weight: 700;\n      box-shadow: 2rpx 2rpx 0 $black;\n      white-space: nowrap;\n\n      &.status-open {\n        background: $yellow;\n      }\n\n      &.status-in_progress {\n        background: $teal;\n      }\n\n      &.status-completed {\n        background: #E0FFE0;\n      }\n    }\n  }\n\n  .request-desc {\n    display: block;\n    font-size: 26rpx;\n    color: #666;\n    margin-bottom: 16rpx;\n    line-height: 1.5;\n  }\n\n  .request-tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10rpx;\n    margin-bottom: 16rpx;\n  }\n\n  .tag-badge {\n    display: flex;\n    align-items: center;\n    gap: 4rpx;\n    padding: 6rpx 12rpx;\n    border: 2rpx solid $black;\n    background: #F5F5F5;\n    font-size: 22rpx;\n    font-weight: 600;\n\n    text:first-child {\n      font-size: 20rpx;\n    }\n  }\n\n  .request-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding-top: 16rpx;\n    border-top: 2rpx dashed #ddd;\n  }\n\n  .request-time {\n    display: flex;\n    align-items: center;\n    gap: 6rpx;\n    font-size: 22rpx;\n    color: #666;\n    font-weight: 600;\n\n    text:first-child {\n      font-size: 24rpx;\n    }\n  }\n\n  .amount {\n    display: flex;\n    align-items: center;\n    gap: 4rpx;\n    font-size: 32rpx;\n    font-weight: 900;\n    color: $red;\n\n    text:first-child {\n      font-size: 24rpx;\n    }\n  }\n}\n\n// Á©∫Áä∂ÊÄÅ\n.empty-state {\n  padding: 64rpx 0;\n}\n\n.empty-card {\n  text-align: center;\n  padding: 48rpx 32rpx !important;\n\n  .empty-icon {\n    display: block;\n    font-size: 96rpx;\n    margin-bottom: 24rpx;\n  }\n\n  .empty-text {\n    display: block;\n    font-size: 28rpx;\n    font-weight: 700;\n    color: $black;\n    margin-bottom: 12rpx;\n  }\n\n  .empty-hint {\n    display: block;\n    font-size: 24rpx;\n    color: #999;\n  }\n}\n\n// Âä®Áîª\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n@keyframes pulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.15); }\n}\n</style>\n","import MiniProgramPage from 'E:/codeplace/test/pages/delivery/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["BrutalistCard","BrutalistButton","TabBar","userStore","useUserStore","requests","ref","currentStatus","statusTabs","label","value","emoji","getTagEmoji","tag","filteredRequests","computed","filter","request","status","getStatusText","open","in_progress","completed","cancelled","formatTime","timestamp","date","Date","diff","getTime","Math","floor","navigateToCreate","isLoggedIn","uni","navigateTo","url","showToast","title","icon","onMounted","async","db","uniCloud","database","res","collection","where","type","orderBy","get","data","e","index","__f__","_id","description","tags","createTime","now","amount","creator","wx","createPage","MiniProgramPage"],"mappings":"yGA8FA,MAAAA,EAA0B,IAAA,8CAC1BC,EAA4B,IAAA,gDAC5BC,EAAmB,IAAA,oFAcb,MAAAC,EAAYC,EAAAA,eAEZC,EAAWC,MAAuB,IAClCC,EAAgBD,MAAY,OAG5BE,EAAa,CACjB,CAAEC,MAAO,KAAMC,MAAO,MAAOC,MAAO,MACpC,CAAEF,MAAO,MAAOC,MAAO,OAAQC,MAAO,MACtC,CAAEF,MAAO,MAAOC,MAAO,cAAeC,MAAO,KAC7C,CAAEF,MAAO,MAAOC,MAAO,YAAaC,MAAO,MAI7C,SAASC,EAAYC,GASZ,MARkC,CACvC,MAAO,KACP,KAAM,KACN,KAAM,KACN,KAAM,KACN,MAAO,KACP,KAAM,MAEQA,IAAQ,KAC1B,CAGM,MAAAC,EAAmBC,EAAAA,UAAS,IACJ,QAAxBR,EAAcG,MACTL,EAASK,MAEXL,EAASK,MAAMM,WAAkBC,EAAQC,SAAWX,EAAcG,UAS3E,SAASS,EAAcD,GAOd,MANmC,CACxCE,KAAQ,MACRC,YAAe,MACfC,UAAa,MACbC,UAAa,OAEEL,IAAWA,CAC9B,CAcA,SAASM,EAAWC,GACZ,MAAAC,EAAO,IAAIC,KAAKF,GAEhBG,OADUD,MACCE,UAAYH,EAAKG,UAElC,OAAID,EAAO,IACF,KACEA,EAAO,KACTE,KAAKC,MAAMH,EAAO,KAAS,MACzBA,EAAO,MACTE,KAAKC,MAAMH,EAAO,MAAW,MAE7BE,KAAKC,MAAMH,EAAO,OAAY,IAEzC,CAGA,SAASI,IACF7B,EAAU8B,WAQfC,EAAAA,MAAIC,WAAW,CACbC,IAAK,2BARLF,EAAAA,MAAIG,UAAU,CACZC,MAAO,OACPC,KAAM,QAQZ,QAiDAC,EAAAA,WAAU,MAvCVC,iBACM,IACI,MAAAC,EAAKC,KAASC,WACdC,QAAYH,EAAGI,WAAW,YAC7BC,MAAM,CACLC,KAAM,aAEPC,QAAQ,aAAc,QACtBC,MAEH7C,EAASK,MAAQmC,EAAIM,IA0BvB,OAzBSC,GACPlB,EAAAmB,MAAIC,MAAM,QAAQ,kCAAkC,QAASF,GAE7D/C,EAASK,MAAQ,CACf,CACE6C,IAAK,IACLjB,MAAO,SACPkB,YAAa,8BACbC,KAAM,CAAC,OACPvC,OAAQ,OACRwC,WAAY/B,KAAKgC,MAAQ,KACzBC,OAAQ,EACRC,QAAS,SAEX,CACEN,IAAK,IACLjB,MAAO,WACPkB,YAAa,wBACbC,KAAM,CAAC,MACPvC,OAAQ,OACRwC,WAAY/B,KAAKgC,MAAQ,KACzBC,OAAQ,EACRC,QAAS,SAGf,CACF,4LAvGA,SAAsB3C,GACpBX,EAAcG,MAAQQ,CACxB,oFAcuBA,WACmB,CACtCE,KAAQ,KACRC,YAAe,IACfC,UAAa,IACbC,UAAa,KAEAL,IAAW,qOAoC5B,SAAoBD,GAClBiB,EAAAA,MAAIC,WAAW,CACbC,IAAK,6BAA6BnB,EAAQsC,OAE9C,eA/CA,IAAuBrC,+HChKvB4C,GAAGC,WAAWC"}