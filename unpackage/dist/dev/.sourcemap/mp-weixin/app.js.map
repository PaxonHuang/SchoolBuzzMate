{"version":3,"file":"app.js","sources":["App.vue","main.ts"],"sourcesContent":["<template>\n  <view class=\"app\">\n    <view class=\"app-content\">\n      <!-- 自定义导航栏占位 -->\n      <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n\n      <!-- 页面内容 -->\n      <router-view />\n    </view>\n  </view>\n</template>\n\n<script setup lang=\"uts\">\nimport { ref } from 'vue'\nimport { onLaunch, onShow, onHide } from '@dcloudio/uni-app'\nimport { useUserStore } from '@/stores/user'\n\n// 状态栏高度\nconst statusBarHeight = ref(0)\n\nconst userStore = useUserStore()\n\n// 应用生命周期\nonLaunch(() => {\n  uni.__f__('log','at App.vue:25','App Launch')\n\n  // 获取系统信息\n  const systemInfo = uni.getSystemInfoSync()\n  statusBarHeight.value = systemInfo.statusBarHeight || 0\n\n  // 检查登录状态\n  userStore.checkLoginStatus()\n\n  // 初始化uni-id\n  initUniId()\n})\n\nonShow(() => {\n  uni.__f__('log','at App.vue:39','App Show')\n})\n\nonHide(() => {\n  uni.__f__('log','at App.vue:43','App Hide')\n})\n\n// 初始化uni-id\nfunction initUniId() {\n  // 在微信小程序中自动登录\n\n  try {\n    uni.login({\n      provider: 'weixin',\n      success: (loginRes) => {\n        uni.__f__('log','at App.vue:54','微信登录成功', loginRes)\n        // 登录成功后可以调用云函数进行后续处理\n      },\n      fail: (err) => {\n        uni.__f__('error','at App.vue:58','微信登录失败', err)\n      }\n    })\n  } catch (e) {\n    uni.__f__('error','at App.vue:62','初始化登录失败:', e)\n  }\n\n}\n</script>\n\n<style lang=\"scss\">\n/* 全局样式 */\npage {\n  height: 100%;\n  background-color: #f5f5f5;\n}\n\n.app {\n  height: 100%;\n\n  .app-content {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n}\n\n/* 定义CSS变量 */\npage {\n  --uni-color-primary: #4CAF50;\n  --uni-color-success: #4CAF50;\n  --uni-color-warning: #FF9800;\n  --uni-color-error: #F44336;\n}\n</style>","import { createSSRApp } from 'vue'\nimport { createPinia } from 'pinia'\nimport App from './App.vue'\n\nexport function createApp() {\n  const app = createSSRApp(App)\n  const pinia = createPinia()\n\n  app.use(pinia)\n\n  return {\n    app,\n    pinia\n  }\n}"],"names":["statusBarHeight","ref","userStore","useUserStore","onLaunch","uni","__f__","systemInfo","getSystemInfoSync","value","checkLoginStatus","login","provider","success","loginRes","index","fail","err","e","onShow","onHide","createApp","app","createSSRApp","App","pinia","createPinia","use","require","mount"],"mappings":"yPAkBM,MAAAA,EAAkBC,MAAI,GAEtBC,EAAYC,EAAAA,sBAGlBC,EAAAA,UAAS,KACHC,EAAAA,MAAAC,MAAM,MAAM,gBAAgB,cAG1B,MAAAC,EAAaF,QAAIG,oBACPR,EAAAS,MAAQF,EAAWP,iBAAmB,EAGtDE,EAAUQ,mBAeZ,WAGM,IACFL,EAAAA,MAAIM,MAAM,CACRC,SAAU,SACVC,QAAUC,IACRT,EAAAU,MAAIT,MAAM,MAAM,gBAAgB,SAAUQ,EAAQ,EAGpDE,KAAOC,IACLZ,EAAAU,MAAIT,MAAM,QAAQ,gBAAgB,SAAUW,EAAG,GAKrD,OAFSC,GACPb,EAAAU,MAAIT,MAAM,QAAQ,gBAAgB,WAAYY,EAChD,CAEF,OA3BAC,EAAAA,QAAO,KACDd,EAAAA,MAAAC,MAAM,MAAM,gBAAgB,WAAU,IAG5Cc,EAAAA,QAAO,KACDf,EAAAA,MAAAC,MAAM,MAAM,gBAAgB,WAAU,iCCtCrC,SAASe,IACR,MAAAC,EAAMC,eAAaC,GACnBC,EAAQC,EAAAA,cAIP,OAFPJ,EAAIK,IAAIF,GAED,CACLH,MACAG,QAEJ,CAdOG,QAAA,0BAAAA,QAAA,6BAgBPP,IAAYC,IAAIO,MAAM"}