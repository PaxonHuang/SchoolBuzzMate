"use strict";const e=require("../../common/vendor.js");Math||(t+a)();const t=()=>"../../components/brutalist/BrutalistCard.js",a=()=>"../../components/brutalist/BrutalistButton.js",n=e.defineComponent({__name:"detail",setup(t){const a=e.ref(null),n=e.ref([]),o=e.ref(""),u=e.ref("");function i(e){const t=new Date(e),a=(new Date).getTime()-t.getTime();return a<6e4?"刚刚":a<36e5?Math.floor(a/6e4)+"分钟前":a<864e5?Math.floor(a/36e5)+"小时前":Math.floor(a/864e5)+"天前"}function l(){e.index.navigateBack()}function r(){if(!o.value.trim())return void e.index.showToast({title:"请输入评论内容",icon:"none"});const t={_id:"comment_"+Date.now(),userName:"我",content:o.value,createTime:Date.now()};n.value.unshift(t),o.value="",e.index.showToast({title:"评论成功",icon:"success"})}async function c(){const t=getCurrentPages(),o=t[t.length-1].options||{};if(u.value=o.id||"",!u.value)return e.index.showToast({title:"帖子不存在",icon:"none"}),void setTimeout((()=>{e.index.navigateBack()}),1500);try{const t=e.tr.database(),o=await t.collection("posts").doc(u.value).get();o.data&&o.data.length>0?(a.value=o.data[0],async function(){n.value=[{_id:"1",userName:"同学A",content:"我也在复习高数，一起吧！",createTime:Date.now()-18e5},{_id:"2",userName:"同学B",content:"几点见面？",createTime:Date.now()-9e5}]}()):a.value={_id:u.value,title:"图书馆约学习搭子",content:"明天下午2点，图书馆三楼，有没有一起复习高数的同学？可以一起讨论问题，互相监督！",creatorName:"学习达人",categoryName:"学习交流",images:[],viewCount:128,commentCount:15,likeCount:32,createTime:Date.now()-36e5}}catch(i){e.index.__f__("error","at pages/forum/detail.vue:250","加载失败:",i),a.value={_id:u.value,title:"图书馆约学习搭子",content:"明天下午2点，图书馆三楼，有没有一起复习高数的同学？可以一起讨论问题，互相监督！",creatorName:"学习达人",categoryName:"学习交流",images:[],viewCount:128,commentCount:15,likeCount:32,createTime:Date.now()-36e5}}}return e.onMounted((()=>{c()})),(t,u)=>{var c;return e.e({a:e.o(l),b:a.value},a.value?e.e({c:e.t((null==(c=a.value.creatorName)?void 0:c.charAt(0))||"U"),d:e.t(a.value.creatorName),e:e.t(i(a.value.createTime)),f:e.t(a.value.categoryName),g:e.t(a.value.title),h:e.t(a.value.content),i:a.value.images&&a.value.images.length>0},a.value.images&&a.value.images.length>0?{j:e.f(a.value.images,((t,n,o)=>({a:t,b:e.o((t=>function(t){var n;(null==(n=a.value)?void 0:n.images)&&e.index.previewImage({urls:a.value.images,current:t})}(n)),n),c:n})))}:{},{k:e.t(a.value.viewCount||0),l:e.t(a.value.commentCount||0),m:e.t(a.value.likeCount||0),n:e.p({taped:!0}),o:e.t(n.value.length),p:o.value,q:e.o((e=>o.value=e.detail.value)),r:e.o(r),s:e.p({accent:!0}),t:n.value.length>0},n.value.length>0?{v:e.f(n.value,((t,a,n)=>{var o;return{a:e.t((null==(o=t.userName)?void 0:o.charAt(0))||"U"),b:e.t(t.userName),c:e.t(t.content),d:e.t(i(t.createTime)),e:t._id}}))}:{},{w:e.p({dashed:!0})}):{x:e.p({dashed:!0})})}}}),o=e._export_sfc(n,[["__scopeId","data-v-15db4200"]]);wx.createPage(o);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/forum/detail.js.map
