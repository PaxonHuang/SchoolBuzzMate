"use strict";const e=require("../../common/vendor.js"),t=require("../../stores/user.js");Math||(a+o+n)();const a=()=>"../../components/brutalist/BrutalistCard.js",o=()=>"../../components/brutalist/BrutalistButton.js",n=()=>"../../components/brutalist/TabBar.js",i=e.defineComponent({__name:"index",setup(a){const o=t.useUserStore(),n=e.ref([]),i=e.ref("all"),l=[{label:"å…¨éƒ¨",value:"all",emoji:"ðŸ“°"},{label:"å­¦ä¹ ",value:"study",emoji:"ðŸ“š"},{label:"ç”Ÿæ´»",value:"life",emoji:"ðŸŒŸ"},{label:"å¤±ç‰©",value:"lost",emoji:"ðŸ”"},{label:"äº¤æ˜“",value:"trade",emoji:"ðŸ’°"},{label:"æ´»åŠ¨",value:"event",emoji:"ðŸŽ‰"}],r=e.computed((()=>"all"===i.value?n.value:n.value.filter((e=>e.category===i.value))));function u(e){const t=new Date(e),a=(new Date).getTime()-t.getTime();return a<6e4?"åˆšåˆš":a<36e5?Math.floor(a/6e4)+"åˆ†é’Ÿå‰":a<864e5?Math.floor(a/36e5)+"å°æ—¶å‰":Math.floor(a/864e5)+"å¤©å‰"}function c(){o.isLoggedIn?e.index.navigateTo({url:"/pages/forum/create"}):e.index.showToast({title:"è¯·å…ˆç™»å½•",icon:"none"})}return e.onMounted((()=>{!async function(){try{const t=e.tr.database(),a=await t.collection("posts").orderBy("createTime","desc").limit(20).get();n.value=a.data}catch(t){e.index.__f__("error","at pages/forum/index.vue:215","åŠ è½½å¤±è´¥:",t),n.value=[{_id:"1",title:"å›¾ä¹¦é¦†çº¦å­¦ä¹ æ­å­",content:"æ˜Žå¤©ä¸‹åˆ2ç‚¹ï¼Œå›¾ä¹¦é¦†ä¸‰æ¥¼ï¼Œæœ‰æ²¡æœ‰ä¸€èµ·å¤ä¹ é«˜æ•°çš„åŒå­¦ï¼Ÿ",creatorName:"å­¦ä¹ è¾¾äºº",creatorAvatar:"",categoryName:"å­¦ä¹ äº¤æµ",category:"study",images:[],viewCount:128,commentCount:15,likeCount:32,createTime:Date.now()-36e5,pinned:!0},{_id:"2",title:"é£Ÿå ‚äºŒæ¥¼æ–°å¼€çš„éº»è¾£çƒ«å¥½è¯„ï¼",content:"ä»Šå¤©è¯•äº†äºŒæ¥¼æ–°å¼€çš„éº»è¾£çƒ«ï¼Œå‘³é“å¾ˆä¸é”™ï¼ŒæŽ¨èå¤§å®¶åŽ»è¯•è¯•~",creatorName:"ç¾Žé£ŸæŽ¢ç´¢å®¶",creatorAvatar:"",categoryName:"æ ¡å›­ç”Ÿæ´»",category:"life",images:[],viewCount:256,commentCount:42,likeCount:88,createTime:Date.now()-72e5}]}}()})),(t,a)=>e.e({a:e.p({taped:!0,accent:!0}),b:e.o(c),c:e.p({accent:!0,taped:!0,arrow:!0}),d:e.f(l,((t,a,o)=>({a:e.t(t.emoji),b:e.t(t.label),c:t.value,d:i.value===t.value?1:"",e:e.o((e=>function(e){i.value=e}(t.value)),t.value)}))),e:e.f(r.value,((t,a,o)=>{var n;return e.e({a:e.t((null==(n=t.creatorName)?void 0:n.charAt(0))||"U"),b:e.t(t.creatorName),c:e.t(u(t.createTime)),d:t.pinned},(t.pinned,{}),{e:e.t(t.title),f:e.t(t.content),g:t.images&&t.images.length>0},t.images&&t.images.length>0?e.e({h:e.f(t.images.slice(0,3),((e,t,a)=>({a:e,b:t}))),i:t.images.length>3},t.images.length>3?{j:e.t(t.images.length-3)}:{}):{},{k:e.t(t.viewCount||0),l:e.t(t.commentCount||0),m:e.t(t.likeCount||0),n:e.t(t.categoryName),o:t.pinned?1:"",p:"0e21892e-2-"+o,q:t._id,r:e.o((a=>function(t){e.index.navigateTo({url:`/pages/forum/detail?id=${t._id}`})}(t)),t._id)})})),f:0===r.value.length},0===r.value.length?{g:e.p({dashed:!0})}:{})}}),l=e._export_sfc(i,[["__scopeId","data-v-0e21892e"]]);wx.createPage(l);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/forum/index.js.map
