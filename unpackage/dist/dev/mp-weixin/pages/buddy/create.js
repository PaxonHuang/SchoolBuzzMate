"use strict";const e=require("../../common/vendor.js"),t=require("../../stores/user.js");Math||(a+n+i)();const a=()=>"../../components/brutalist/BrutalistCard.js",i=()=>"../../components/brutalist/BrutalistButton.js",n=()=>"../../components/brutalist/BrutalistInput.js",s=e.defineComponent({__name:"create",setup(a){const i=t.useUserStore(),n=e.ref({title:"",description:"",tags:[],maxParticipants:0}),s=["å­¦ä¹ ","è¿åŠ¨","æ—…æ¸¸","é¥­æ­å­","å›¾ä¹¦é¦†","ç¯®çƒ","è¶³çƒ","ç¾½æ¯›çƒ","è‡ªä¹ ","è€ƒè¯•"];function o(e){return{"å­¦ä¹ ":"ðŸ“š","è¿åŠ¨":"ðŸƒ","æ—…æ¸¸":"âœˆï¸","é¥­æ­å­":"ðŸœ","å›¾ä¹¦é¦†":"ðŸ“–","ç¯®çƒ":"ðŸ€","è¶³çƒ":"âš½","ç¾½æ¯›çƒ":"ðŸ¸","è‡ªä¹ ":"âœï¸","è€ƒè¯•":"ðŸ“"}[e]||"ðŸ·ï¸"}function c(e){n.value.maxParticipants=e}function r(){e.index.navigateBack()}async function l(){var t,a,s,o;if(i.isLoggedIn)if(n.value.title.trim())if(0!==n.value.tags.length)if(n.value.description.trim()){e.index.showLoading({title:"å‘å¸ƒä¸­..."});try{const s=e.tr.database();await s.collection("requests").add({type:"buddy",title:n.value.title,description:n.value.description,tags:n.value.tags,maxParticipants:n.value.maxParticipants||null,creator:(null==(t=i.user)?void 0:t._id)||"user_"+Date.now(),creatorName:(null==(a=i.user)?void 0:a.nickname)||"æ ¡å›­ç”¨æˆ·",status:"open"}),e.index.hideLoading(),e.index.showToast({title:"å‘å¸ƒæˆåŠŸï¼",icon:"success"}),setTimeout((()=>{e.index.navigateBack()}),1500)}catch(c){e.index.hideLoading(),e.index.__f__("error","at pages/buddy/create.vue:246","å‘å¸ƒå¤±è´¥:",c);const t={_id:"req_"+Date.now(),title:n.value.title,description:n.value.description,tags:n.value.tags,maxParticipants:n.value.maxParticipants||null,creator:(null==(s=i.user)?void 0:s._id)||"user_"+Date.now(),creatorName:(null==(o=i.user)?void 0:o.nickname)||"æ ¡å›­ç”¨æˆ·",createTime:Date.now(),status:"open"},a=e.index.getStorageSync("mock_requests")||[];a.unshift(t),e.index.setStorageSync("mock_requests",a),e.index.showToast({title:"å‘å¸ƒæˆåŠŸï¼ˆæœ¬åœ°ï¼‰",icon:"success"}),setTimeout((()=>{e.index.navigateBack()}),1500)}}else e.index.showToast({title:"è¯·è¾“å…¥æè¿°",icon:"none"});else e.index.showToast({title:"è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªç±»åž‹",icon:"none"});else e.index.showToast({title:"è¯·è¾“å…¥æ ‡é¢˜",icon:"none"});else e.index.showToast({title:"è¯·å…ˆç™»å½•",icon:"none"})}return(t,a)=>({a:e.o(r),b:e.p({taped:!0,accent:!0}),c:e.o((e=>n.value.title=e)),d:e.p({placeholder:"ä¾‹å¦‚ï¼šå¯»æ‰¾å‘¨ä¸‰å›¾ä¹¦é¦†è‡ªä¹ ä¼™ä¼´",maxlength:30,"show-count":!0,taped:!0,modelValue:n.value.title}),e:e.f(s,((t,a,i)=>({a:e.t(o(t)),b:e.t(t),c:t,d:n.value.tags.includes(t)?1:"",e:e.o((e=>function(e){const t=n.value.tags.indexOf(e);-1===t?n.value.tags.push(e):n.value.tags.splice(t,1)}(t)),t)}))),f:n.value.description,g:e.o((e=>n.value.description=e.detail.value)),h:e.t(n.value.description.length),i:e.f([2,3,4,6,8],((t,a,i)=>({a:e.t(t),b:t,c:n.value.maxParticipants===t?1:"",d:e.o((e=>c(t)),t)}))),j:0===n.value.maxParticipants?1:"",k:e.o((e=>c(0))),l:e.o(l),m:e.p({accent:!0,taped:!0,arrow:!0,large:!0})})}}),o=e._export_sfc(s,[["__scopeId","data-v-edc7cb70"]]);wx.createPage(o);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/buddy/create.js.map
