"use strict";const e=require("../../common/vendor.js"),t=require("../../stores/user.js");Math||(a+n+s)();const a=()=>"../../components/brutalist/BrutalistCard.js",n=()=>"../../components/brutalist/BrutalistButton.js",s=()=>"../../components/brutalist/TabBar.js",o=e.defineComponent({__name:"index",setup(a){const n=t.useUserStore(),s=e.ref([]),o=e.ref([]),r=["å­¦ä¹ ","è¿åŠ¨","æ—…æ¸¸","é¥­æ­å­","å›¾ä¹¦é¦†","ç¯®çƒ","è¶³çƒ","ç¾½æ¯›çƒ","è‡ªä¹ ","è€ƒè¯•"];function i(e){return{"å­¦ä¹ ":"ğŸ“š","è¿åŠ¨":"ğŸƒ","æ—…æ¸¸":"âœˆï¸","é¥­æ­å­":"ğŸœ","å›¾ä¹¦é¦†":"ğŸ“–","ç¯®çƒ":"ğŸ€","è¶³çƒ":"âš½","ç¾½æ¯›çƒ":"ğŸ¸","è‡ªä¹ ":"âœï¸","è€ƒè¯•":"ğŸ“"}[e]||"ğŸ·ï¸"}const c=e.computed((()=>0===o.value.length?s.value:s.value.filter((e=>o.value.some((t=>e.tags.includes(t)))))));function u(e){return{open:"æ‹›å‹Ÿä¸­",filled:"å·²æ»¡å‘˜",completed:"å·²å®Œæˆ"}[e]||e}function d(e){const t=new Date(e),a=(new Date).getTime()-t.getTime();return a<6e4?"åˆšåˆš":a<36e5?Math.floor(a/6e4)+"åˆ†é’Ÿå‰":a<864e5?Math.floor(a/36e5)+"å°æ—¶å‰":Math.floor(a/864e5)+"å¤©å‰"}function l(){n.isLoggedIn?e.index.navigateTo({url:"/pages/buddy/create"}):e.index.showToast({title:"è¯·å…ˆç™»å½•",icon:"none"})}async function p(){try{const t=e.tr.database(),a=(await t.collection("requests").where({type:"buddy"}).orderBy("createTime desc","desc").get()).data;s.value=a.map((e=>({...e,createTime:e.createTime||Date.now()})))}catch(t){e.index.__f__("error","at pages/buddy/index.vue:243","åŠ è½½å¤±è´¥:",t);const a=e.index.getStorageSync("mock_requests")||[];s.value=a.map((e=>({...e,createTime:e.createTime||Date.now()}))),0===s.value.length&&(s.value=[{_id:"1",title:"å›¾ä¹¦é¦†çº¦è‡ªä¹ ",description:"æ˜å¤©ä¸‹åˆ2ç‚¹ï¼Œå›¾ä¹¦é¦†ä¸‰æ¥¼è‡ªä¹ åŒºï¼Œæœ‰æ²¡æœ‰ä¸€èµ·å¤ä¹ é«˜æ•°çš„åŒå­¦ï¼Ÿ",tags:["å­¦ä¹ ","å›¾ä¹¦é¦†","è‡ªä¹ "],status:"open",createTime:Date.now()-36e5,maxParticipants:4,creator:"user1"},{_id:"2",title:"ç¯®çƒ3v3ç¼ºäºº",description:"ä»Šæ™š6ç‚¹ä½“è‚²é¦†ï¼Œè¿˜å·®ä¸€ä¸ªäººï¼Œä¼šæ‰“çš„æ¥ï¼",tags:["è¿åŠ¨","ç¯®çƒ"],status:"open",createTime:Date.now()-72e5,maxParticipants:6,creator:"user2"}])}}return e.onMounted((()=>{p()})),e.onShow((()=>{p()})),e.onPullDownRefresh((async()=>{await p(),e.index.stopPullDownRefresh()})),(t,a)=>e.e({a:e.p({taped:!0,accent:!0}),b:e.o(l),c:e.p({accent:!0,taped:!0,arrow:!0}),d:e.f(r,((t,a,n)=>({a:e.t(i(t)),b:e.t(t),c:t,d:o.value.includes(t)?1:"",e:e.o((e=>function(e){const t=o.value.indexOf(e);-1===t?o.value.push(e):o.value.splice(t,1)}(t)),t)}))),e:e.p({dashed:!0}),f:e.f(c.value,((t,a,n)=>{return{a:e.t(t.title),b:e.t((s=t.status,{open:"ğŸ”¥",filled:"âœ…",completed:"ğŸ‰"}[s]||"ğŸ“Œ")),c:e.t(u(t.status)),d:e.n("status-"+t.status),e:e.t(t.description),f:e.f(t.tags,((t,a,n)=>({a:e.t(i(t)),b:e.t(t),c:t}))),g:e.t(d(t.createTime)),h:e.t(t.maxParticipants||"ä¸é™"),i:"f6d0b58d-3-"+n,j:t._id,k:e.o((a=>function(t){e.index.navigateTo({url:`/pages/buddy/detail?id=${t._id}`})}(t)),t._id)};var s})),g:0===c.value.length},0===c.value.length?{h:e.p({dashed:!0})}:{})}}),r=e._export_sfc(o,[["__scopeId","data-v-f6d0b58d"]]);wx.createPage(r);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/buddy/index.js.map
